
apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'jetty'

sourceCompatibility = '1.7'
archivesBaseName    = 'sc'

repositories {
    maven {
        url "http://gemjars.org/maven"
    }
    mavenCentral()
    mavenLocal()
}

dependencies {
    compile module("org.jruby.rack:jruby-rack:1.1.9") {
        dependency "org.jruby:jruby-complete:1.7.1"
    }
    compile "javax:javaee-web-api:6.0"
    compile "org.rubygems:sinatra:1.3.3"
    compile "org.apache.solr:solr-core:4.0.0"
    compile "commons-io:commons-io:2.4"
}

sourceSets {
    main {
        resources {
            srcDir "src/main/ruby"
            srcDir "src/main/java"
        }
    }
}

jar {
    manifest {
        attributes('Main-Class': 'org.watermint.sourcecolon.Main')
    }
    from configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }
}
